<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script src="./lib/coordinate.js" type="text/javascript"></script>

<title>指定したエクステントが含まれるシンプルマップタイルのインデックスを作成する</title>
</head>
<body>

<div id="info">Extent to Index</div>
<label>xmin</label><input type="text" id="xmin" value="-38100.00">
<label>ymin</label><input type="text" id="ymin" value="-44800.00">
<label>xmax</label><input type="text" id="xmax" value="-38100.00">
<label>ymax</label><input type="text" id="ymax" value="-44800.00">
<br>
<input type="button" name="move" value="作成" onClick="goMake()"></input>

<script>

function goMake(){
  // 新規空オブジェクト生成
  var coordMin = new coordinate(9);
  var coordMax = new coordinate(9);
  // input フィールドの値を変数に設定
  xmin = parseFloat(document.getElementById("xmin").value);
  ymin = parseFloat(document.getElementById("ymin").value);
  xmax = parseFloat(document.getElementById("xmax").value);
  ymax = parseFloat(document.getElementById("ymax").value);

  coordMin.setXY(xmin,ymin);
  var sTile = coordMin.getSTileZXY(20);
  var sExtent = tile2extent(sTile);
  coordMin.setLonLat(sExtent[0],sExtent[1]);
  xminS = coordMin.X;
  yminS = coordMin.Y;
  
  coordMax.setLonLat(sExtent[2],sExtent[3]);
  xmaxS = coordMax.X;
  ymaxS = coordMax.Y;
  
  stileID = sTile[0] + '/' +sTile[1] +'/' + sTile[2];

var geojsonObject = {
  'type': 'FeatureCollection',
'crs': {
    'type': 'name',
    'properties': {
      'name': 'EPSG:2451'
    }
  },
  'features': [

    {
      'type': 'Feature',
      'properties': { 'id': stileID },
      'geometry': {
        'type': 'Polygon',
        'coordinates': [[[xminS, yminS],[xminS, ymaxS],[xmaxS, ymaxS],[xmaxS, yminS],[xminS, yminS]]]
      }
    }]
}

var json_text =  JSON.stringify(geojsonObject);
//alert(json_text);
document.write(json_text) 

}

</script>
</body>
</html>
